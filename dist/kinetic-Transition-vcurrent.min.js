(function(){Kinetic.Transition=function(e,t){function i(e,t,r,s){for(var o in e)o!=="duration"&&o!=="easing"&&o!=="callback"&&(Kinetic.Type._isObject(e[o])?(r[o]={},i(e[o],t[o],r[o],s)):n._add(n._getTween(t,o,e[o],r,s)))}var n=this,r={};this.node=e,this.config=t,this.tweens=[],i(t,e.attrs,r,r),this.tweens[0].onStarted=function(){},this.tweens[0].onStopped=function(){e.transAnim.stop()},this.tweens[0].onResumed=function(){e.transAnim.start()},this.tweens[0].onLooped=function(){},this.tweens[0].onChanged=function(){},this.tweens[0].onFinished=function(){var n={};for(var r in t)r!=="duration"&&r!=="easing"&&r!=="callback"&&(n[r]=t[r]);e.transAnim.stop(),e.setAttrs(n),t.callback&&t.callback()}},Kinetic.Transition.prototype={start:function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].start()},stop:function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].stop()},resume:function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].resume()},_onEnterFrame:function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].onEnterFrame()},_add:function(e){this.tweens.push(e)},_getTween:function(e,t,n,r,i){var s=this.config,o=this.node,u=s.easing;u===undefined&&(u="linear");var a=new Kinetic.Tween(o,function(e){r[t]=e,o.setAttrs(i)},Kinetic.Tweens[u],e[t],n,s.duration);return a}},Kinetic.Node.prototype.transitionTo=function(e){var t=this,n=new Kinetic.Transition(this,e);return this.transAnim||(this.transAnim=new Kinetic.Animation),this.transAnim.func=function(){n._onEnterFrame()},this.transAnim.node=this.nodeType==="Stage"?this:this.getLayer(),n.start(),this.transAnim.start(),this.trans=n,n}})();
