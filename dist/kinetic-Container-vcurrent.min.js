(function(){Kinetic.Container=function(e){this._containerInit(e)},Kinetic.Container.prototype={_containerInit:function(e){this.children=[],Kinetic.Node.call(this,e)},getChildren:function(){return this.children},removeChildren:function(){while(this.children.length>0)this.children[0].remove()},add:function(e){var t=Kinetic.Global,n=this.children;return e.index=n.length,e.parent=this,n.push(e),this},get:function(e){var t=new Kinetic.Collection;if(e.charAt(0)==="#"){var n=this._getNodeById(e.slice(1));n&&t.push(n)}else if(e.charAt(0)==="."){var r=this._getNodesByName(e.slice(1));Kinetic.Collection.apply(t,r)}else{var i=[],s=this.getChildren(),o=s.length;for(var u=0;u<o;u++)i=i.concat(s[u]._get(e));Kinetic.Collection.apply(t,i)}return t},_getNodeById:function(e){var t=this.getStage(),n=Kinetic.Global,r=n.ids[e];return r!==undefined&&this.isAncestorOf(r)?r:null},_getNodesByName:function(e){var t=Kinetic.Global,n=t.names[e]||[];return this._getDescendants(n)},_get:function(e){var t=Kinetic.Node.prototype._get.call(this,e),n=this.getChildren(),r=n.length;for(var i=0;i<r;i++)t=t.concat(n[i]._get(e));return t},toObject:function(){var e=Kinetic.Node.prototype.toObject.call(this);e.children=[];var t=this.getChildren(),n=t.length;for(var r=0;r<n;r++){var i=t[r];e.children.push(i.toObject())}return e},_getDescendants:function(e){var t=[],n=e.length;for(var r=0;r<n;r++){var i=e[r];this.isAncestorOf(i)&&t.push(i)}return t},isAncestorOf:function(e){var t=e.getParent();while(t){if(t._id===this._id)return!0;t=t.getParent()}return!1},clone:function(e){var t=Kinetic.Node.prototype.clone.call(this,e);for(var n in this.children)t.add(this.children[n].clone());return t},getIntersections:function(){var e=Kinetic.Type._getXY(Array.prototype.slice.call(arguments)),t=[],n=this.get("Shape"),r=n.length;for(var i=0;i<r;i++){var s=n[i];s.isVisible()&&s.intersects(e)&&t.push(s)}return t},_setChildrenIndices:function(){var e=this.children,t=e.length;for(var n=0;n<t;n++)e[n].index=n},draw:function(){this.drawScene(),this.drawHit()},drawScene:function(e){if(this.isVisible()){var t=this.children,n=t.length;for(var r=0;r<n;r++)t[r].drawScene(e)}},drawHit:function(){if(this.isVisible()&&this.isListening()){var e=this.children,t=e.length;for(var n=0;n<t;n++)e[n].drawHit()}}},Kinetic.Global.extend(Kinetic.Container,Kinetic.Node)})();
